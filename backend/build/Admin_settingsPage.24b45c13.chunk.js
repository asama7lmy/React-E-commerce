(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[4981],{29404:(Y,M,t)=>{"use strict";t.d(M,{w:()=>c});var e=t(92132),r=t(21272),l=t(94061),y=t(83997);const c=({children:h,spacing:f=2,horizontal:T=!1,...R})=>(0,e.jsx)(l.a,{paddingTop:2,paddingBottom:4,children:(0,e.jsx)(y.s,{as:"ol",gap:f,direction:T?"row":"column",alignItems:T?"center":"stretch",...R,children:r.Children.map(h,(A,j)=>(0,e.jsx)("li",{children:A},j))})})},30420:(Y,M,t)=>{"use strict";t.d(M,{m:()=>y});var e=t(21272),r=t(51337),l=t(74930);function y(){const{get:c}=(0,r.ry)(),{formatAPIError:h}=(0,r.wq)(),f=(0,r.hN)(),T=(0,l.useQueries)(["components","content-types"].map(L=>({queryKey:["content-manager",L],async queryFn(){const{data:{data:E}}=await c(`/content-manager/${L}`);return E},onError(E){f({type:"warning",message:h(E)})}}))),[R,A]=T,j=R.isLoading||A.isLoading,D=e.useMemo(()=>(A?.data??[]).filter(L=>L.kind==="collectionType"&&L.isDisplayed),[A?.data]),u=e.useMemo(()=>(A?.data??[]).filter(L=>L.kind!=="collectionType"&&L.isDisplayed),[A?.data]);return{isLoading:j,components:e.useMemo(()=>R?.data??[],[R?.data]),collectionTypes:D,singleTypes:u}}},32091:(Y,M,t)=>{"use strict";t.d(M,{X:()=>N});var e=t(92132),r=t(21272),l=t(60678),y=t(63891),c=t(34353),h=t(84175);const f=n=>{const $=(0,r.useRef)();return(0,r.useEffect)(()=>{$.current=n}),$.current};var T=t(48653),R=t(94061),A=t(75244),j=t(7297),D=t(83997),u=t(30893),L=t(88353);const E=(0,y.Ay)(T.c)`
  width: ${24/16}rem;
  background-color: ${({theme:n})=>n.colors.neutral200};
`,N=({as:n="h2",label:$,searchLabel:K="",searchable:et=!1,onChange:st=()=>{},value:rt="",onClear:ht=()=>{},onSubmit:dt=()=>{},id:V})=>{const[at,X]=(0,r.useState)(!1),U=f(at),vt=(0,h.B)(V),k=(0,r.useRef)(void 0),ct=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{at&&k.current&&k.current.focus(),U&&!at&&ct.current&&ct.current.focus()},[at,U]);const x=()=>{X(G=>!G)},g=G=>{ht(G),k.current.focus()},v=G=>{G.relatedTarget?.id!==vt&&X(!1)},q=G=>{G.key===c.K.ESCAPE&&X(!1)};return at?(0,e.jsxs)(R.a,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,e.jsx)(A.B,{children:(0,e.jsx)(j.S,{name:"searchbar",value:rt,onChange:st,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:q,ref:k,onBlur:v,onClear:g,onSubmit:dt,clearLabel:"Clear",size:"S",children:K})}),(0,e.jsx)(R.a,{paddingLeft:2,paddingTop:4,children:(0,e.jsx)(E,{})})]}):(0,e.jsxs)(R.a,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,e.jsxs)(D.s,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,e.jsx)(u.o,{variant:"beta",as:n,children:$}),et&&(0,e.jsx)(L.K,{ref:ct,onClick:x,label:K,icon:(0,e.jsx)(l.A,{})})]}),(0,e.jsx)(R.a,{paddingTop:4,children:(0,e.jsx)(E,{})})]})}},41156:(Y,M,t)=>{"use strict";t.d(M,{C:()=>h});var e=t(92132),r=t(63891),l=t(90151);const y=`${232/16}rem`,c=(0,r.Ay)(l.x)`
  width: ${y};
  background: ${({theme:f})=>f.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:f})=>f.colors.neutral200};
  z-index: 1;
`,h=({ariaLabel:f,...T})=>(0,e.jsx)(c,{"aria-label":f,as:"nav",...T})},42455:(Y,M,t)=>{"use strict";t.d(M,{P:()=>h});var e=t(92132),r=t(63891),l=t(94061);const y=(0,r.Ay)(l.a)`
  display: grid;
  grid-template-columns: ${({hasSideNav:f})=>f?"auto 1fr":"1fr"};
`,c=(0,r.Ay)(l.a)`
  overflow-x: hidden;
`,h=({sideNav:f,children:T})=>(0,e.jsxs)(y,{hasSideNav:Boolean(f),children:[f,(0,e.jsx)(c,{paddingBottom:10,children:T})]})},44823:(Y,M,t)=>{"use strict";t.r(M),t.d(M,{SettingsPage:()=>Ce});var e=t(21272),r=t(42455),l=t(51337),y=t(14718),c=t(54894),h=t(17703),f=t(67161),T=t(88022),R=t(21428),A=t(57918),j=t(41156),D=t(32091),u=t(29404),L=t(87419),E=t(63996),N=t(33544),n=t.n(N),$=t(71389);const K=({menu:s})=>{const{formatMessage:o}=(0,c.A)(),{trackUsage:i}=(0,l.z1)(),{pathname:a}=(0,h.zy)(),S=s.filter(m=>!m.links.every(d=>d.isDisplayed===!1)).map(m=>({...m,title:m.intlLabel,links:m.links.map(d=>({...d,title:d.intlLabel,name:d.id}))})),O=o({id:"global.settings",defaultMessage:"Settings"}),C=(m=null)=>{i("willNavigate",{from:a,to:m})};return e.createElement(j.C,{ariaLabel:O},e.createElement(D.X,{label:O}),e.createElement(u.w,null,S.map(m=>e.createElement(L.L,{key:m.id,label:o(m.intlLabel)},m.links.map(d=>e.createElement(E.u,{as:$.k2,withBullet:d.hasNotification,to:d.to,onClick:()=>C(d.to),key:d.id},o(d.intlLabel)))))))};K.propTypes={menu:n().array.isRequired};const et=K,st=[{async Component(){return await t.e(1177).then(t.bind(t,36156))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6823)]).then(t.bind(t,12370))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6823)]).then(t.bind(t,12370))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6823)]).then(t.bind(t,49659))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(4563).then(t.bind(t,50125))},to:"/settings/users",exact:!0},{async Component(){return await t.e(9298).then(t.bind(t,86209))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(3881).then(t.bind(t,31479))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(3881).then(t.bind(t,83807))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4001).then(t.bind(t,62))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(1007).then(t.bind(t,71358))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6188),t.e(8727),t.e(2415)]).then(t.bind(t,48441))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6188),t.e(8727),t.e(6723)]).then(t.bind(t,83321))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6188),t.e(6364),t.e(9962)]).then(t.bind(t,51040))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(314).then(t.bind(t,12837))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(6188),t.e(6364),t.e(3170)]).then(t.bind(t,50788))},to:"/settings/transfer-tokens/:id",exact:!0}];var rt=t(38413),ht=t(43064),dt=t(55356),V=t(85963),at=t(4198),X=t(83997),U=t(30893),vt=t(90151),k=t(68074),ct=t(64871),x=t(54514),g=t(14595),v=t(74930),q=t(69267),G=t(88195),ut=t(71526),Z=t(94061);const b=750,nt=100,mt=["image/jpeg","image/png","image/svg+xml"];var Q=t(5239),z=t(11196),ot=t(88353),Ct=t(7981),yt=t(5194),ft=t(70603),Mt=t(61485),Lt=t(99248),it=t(88761);const Et={localImage:void 0},W=(s=Et,o)=>(0,it.Ay)(s,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}}),I=({onChangeLogo:s,customLogo:o,goTo:i,Component:a,modalTitle:p,next:S,prev:O,currentStep:C})=>{const[{localImage:m},d]=(0,e.useReducer)(W,Et),{formatMessage:F}=(0,c.A)(),P=w=>{d({type:"SET_LOCAL_IMAGE",value:w})},J=()=>{i(null)};return C?e.createElement(Mt.k,{labelledBy:"modal",onClose:J},e.createElement(Lt.r,null,e.createElement(U.o,{fontWeight:"bold",as:"h2",id:"modal"},F(p))),e.createElement(a,{setLocalImage:P,goTo:i,next:S,prev:O,onClose:J,asset:m||o,onChangeLogo:s})):null};I.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},I.propTypes={Component:n().elementType,currentStep:n().string,customLogo:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}),goTo:n().func.isRequired,modalTitle:n().shape({id:n().string,defaultMessage:n().string}),next:n().string,onChangeLogo:n().func.isRequired,prev:n().string};const H=I,gt={currentStep:void 0},Gt=(s=gt,o)=>(0,it.Ay)(s,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}});var Ht=t(12081),xt=t(12408),Vt=t(48653),St=t(24093),Xt=t(74447),Zt=t(7153),bt=t(58805),Qt=t(10229),Tt=t(67030),Yt=t(99576),Jt=t(63891);const wt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},jt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},kt=s=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){o({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(s)}),qt=(s,o)=>({ext:s.name.split(".").pop(),size:s.size/1e3,name:s.name,url:URL.createObjectURL(s),rawFile:s,width:o.width,height:o.height}),Ut=async s=>{let o;if(!mt.includes(s.type))throw o=new Error("File format"),o.displayMessage=wt,o;const a=await kt(s);if(!(a.width<=b&&a.height<=b))throw o=new Error("File sizing"),o.displayMessage=jt,o;const S=qt(s,a);if(!(S.size<=nt))throw o=new Error("File sizing"),o.displayMessage=jt,o;return S},_t=(0,Jt.Ay)(Xt.T)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,At=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:p}=(0,c.A)(),[S,O]=(0,e.useState)(!1),[C,m]=(0,e.useState)(void 0),d=(0,e.useRef)(null),F=()=>O(!0),P=()=>O(!1),J=lt=>{lt.preventDefault(),d.current.click()},w=async()=>{P();const lt=d.current.files[0];if(lt)try{const pt=await Ut(lt);s(pt),o(i)}catch(pt){if(pt.displayMessage)m(p(pt.displayMessage,{size:nt,dimension:b})),d.current.focus();else throw pt}},tt=()=>S?"primary500":C?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(Z.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Zt.D,{name:"logo-upload",error:C},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(X.s,{direction:"column",alignItems:"stretch",gap:2},e.createElement(X.s,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:S?"primary100":"neutral100",borderColor:tt(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:F,onDragLeave:P},e.createElement(bt.I,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Yt.A,"aria-hidden":!0}),e.createElement(Z.a,{paddingTop:3,paddingBottom:5},e.createElement(U.o,{variant:"delta",as:"span"},p({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(_t,{accept:mt,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:w,ref:d,id:"logo-upload"}),e.createElement(V.$,{type:"button",onClick:J},p({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(Z.a,{paddingTop:6},e.createElement(U.o,{variant:"pi",textColor:"neutral600"},p({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:nt,dimension:b})))),e.createElement(Qt.b,null)))))),e.createElement(Tt.j,{startActions:e.createElement(V.$,{onClick:a,variant:"tertiary"},p({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};At.defaultProps={next:null},At.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const te=At;var ee=t(7537);const ne=async s=>{try{const{get:o}=(0,l.GD)(),i=await o(s,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}},Rt=({goTo:s,next:o,onClose:i,setLocalImage:a})=>{const{formatMessage:p}=(0,c.A)(),[S,O]=(0,e.useState)(""),[C,m]=(0,e.useState)(null),d=P=>{O(P.target.value)},F=async()=>{try{const P=await ne(S),J=await Ut(P);a(J),s(o)}catch(P){if(P.displayMessage)m(p(P.displayMessage,{size:nt,dimension:b}));else throw P}};return e.createElement("form",{onSubmit:P=>{P.preventDefault(),F()}},e.createElement(Z.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ee.k,{label:p({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:C,onChange:d,value:S,name:"logo-url"})),e.createElement(Tt.j,{startActions:e.createElement(V.$,{onClick:i,variant:"tertiary"},p({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(V.$,{type:"submit"},p({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Rt.defaultProps={next:null},Rt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const oe=Rt,Dt=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:p}=(0,c.A)();return e.createElement(Ht.f,{label:p({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(Z.a,{paddingLeft:8,paddingRight:8},e.createElement(xt.t,null,e.createElement(xt.o,null,p({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(xt.o,null,p({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Vt.c,null)),e.createElement(St.T,null,e.createElement(St.K,null,e.createElement(te,{onClose:a,setLocalImage:s,goTo:o,next:i})),e.createElement(St.K,null,e.createElement(oe,{onClose:a,setLocalImage:s,goTo:o,next:i}))))};Dt.defaultProps={next:null},Dt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const se=Dt;var ae=t(19307),ie=t(33468),le=t(37789),re=t(76547),de=t(52358),zt=t(98915),ce=t(1844);const Ft=({asset:s})=>{const{formatMessage:o}=(0,c.A)();return e.createElement(ae.Z,null,e.createElement(ie.a,null,e.createElement(le.P,{size:"S",src:s.url})),e.createElement(re.b,null,e.createElement(de.W,null,e.createElement(zt.Z,null,s.name),e.createElement(zt.j,null,`${s.ext.toUpperCase()} - ${s.width}\u2715${s.height}`)),e.createElement(ce.S,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Ft.propTypes={asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired};const ue=Ft,Ot=({onClose:s,asset:o,prev:i,next:a,goTo:p,setLocalImage:S,onChangeLogo:O})=>{const{formatMessage:C}=(0,c.A)(),m=()=>{S(void 0),p(i)},d=()=>{O(o),p(a)};return e.createElement(e.Fragment,null,e.createElement(Z.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(X.s,{justifyContent:"space-between",paddingBottom:6},e.createElement(X.s,{direction:"column",alignItems:"flex-start"},e.createElement(U.o,{variant:"pi",fontWeight:"bold"},C({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(U.o,{variant:"pi",textColor:"neutral500"},C({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(V.$,{onClick:m,variant:"secondary"},C({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(Z.a,{maxWidth:(0,l.a8)(180)},o.url?e.createElement(ue,{asset:o}):null)),e.createElement(Tt.j,{startActions:e.createElement(V.$,{onClick:s,variant:"tertiary"},C({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(V.$,{onClick:d},C({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Ot.defaultProps={next:null,prev:null},Ot.propTypes={goTo:n().func.isRequired,asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired,next:n().string,onClose:n().func.isRequired,onChangeLogo:n().func.isRequired,prev:n().string,setLocalImage:n().func.isRequired};const me={upload:{Component:se,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Ot,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},Pt=({canUpdate:s,customLogo:o,defaultLogo:i,hint:a,label:p,onChangeLogo:S,onResetLogo:O})=>{const[{currentStep:C},m]=(0,e.useReducer)(Gt,gt),{Component:d,next:F,prev:P,modalTitle:J}=me[C]||{},{formatMessage:w}=(0,c.A)(),tt=lt=>{m({type:"GO_TO",to:lt})};return e.createElement(e.Fragment,null,e.createElement(Q.Z,{label:p,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(z.O,null,e.createElement(ot.K,{disabled:!s,onClick:()=>tt(o?"pending":"upload"),label:w({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(yt.A,null)}),o&&e.createElement(ot.K,{disabled:!s,onClick:O,label:w({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(ft.A,null)}))},e.createElement(Ct.o,{label:w({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(Z.a,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:w({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(H,{Component:d,currentStep:C,onChangeLogo:S,customLogo:o,goTo:tt,next:F,prev:P,modalTitle:J}))};Pt.defaultProps={canUpdate:!1,customLogo:null,hint:null},Pt.propTypes={canUpdate:n().bool,customLogo:n().shape({url:n().string,name:n().string}),label:n().string.isRequired,hint:n().string,defaultLogo:n().string.isRequired,onChangeLogo:n().func.isRequired,onResetLogo:n().func.isRequired};const Nt=Pt;var ge=t(59080),pe=t.n(ge);const he=(s,o)=>pe()(s,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}}),It={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},fe=(s=It,o)=>(0,it.Ay)(s,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Bt=(0,e.forwardRef)(({canUpdate:s,projectSettingsStored:o},i)=>{const{formatMessage:a}=(0,c.A)(),{trackUsage:p}=(0,l.z1)(),{logos:{menu:S,auth:O}}=(0,G._)(),[{menuLogo:C,authLogo:m},d]=(0,e.useReducer)(fe,It,()=>he(It,o)),F=tt=>{d({type:"SET_CUSTOM_MENU_LOGO",value:tt})},P=()=>{p("didClickResetLogo",{logo:"menu"}),d({type:"RESET_CUSTOM_MENU_LOGO"})},J=tt=>{d({type:"SET_CUSTOM_AUTH_LOGO",value:tt})},w=()=>{p("didClickResetLogo",{logo:"auth"}),d({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:C.submit,authLogo:m.submit})})),e.createElement(Z.a,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(U.o,{variant:"delta",as:"h3"},a({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(U.o,{variant:"pi",textColor:"neutral600"},a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:b,size:nt})),e.createElement(vt.x,{paddingTop:4,gap:4},e.createElement(k.E,{col:6,s:12},e.createElement(Nt,{canUpdate:s,customLogo:C.display,defaultLogo:S.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:F,onResetLogo:P})),e.createElement(k.E,{col:6,s:12},e.createElement(Nt,{canUpdate:s,customLogo:m.display,defaultLogo:O.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:J,onResetLogo:w}))))});Bt.defaultProps={canUpdate:!1,projectSettingsStored:null},Bt.propTypes={canUpdate:n().bool,projectSettingsStored:n().shape({menuLogo:n().shape({url:n().string,name:n().string})})};const Ee=Bt,ve=s=>{const o=new FormData;return Object.entries(s).forEach(([i,a])=>{a&&a.rawFile instanceof File&&o.append(i,a.rawFile),a&&a.isReset&&o.append(i,null)}),o},ye=()=>null,Le=()=>{const s=e.useRef(),o=(0,l.hN)(),{trackUsage:i}=(0,l.z1)(),{formatMessage:a}=(0,c.A)(),{get:p,post:S}=(0,l.ry)(),{updateProjectSettings:O}=(0,G._)(),C=(0,q.d4)(ut.G),{formatAPIError:m}=(0,l.wq)(),{communityEdition:d,latestStrapiReleaseTag:F,nodeVersion:P,shouldUpdateStrapi:J,strapiVersion:w}=(0,l.Xe)(),tt=(0,T.h)(ye,async()=>(await t.e(9849).then(t.bind(t,59849))).AdminSeatInfoEE),{allowedActions:{canRead:lt,canUpdate:pt}}=(0,l.ec)(C.settings["project-settings"]);(0,l.L4)();const{data:$t,isLoading:Me}=(0,v.useQuery)(["project-settings"],async()=>{const{data:B}=await p("/admin/project-settings");return B},{cacheTime:0,enabled:lt,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,l.vX)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,l.vX)(B.menuLogo.url)}:B.menuLogo}}}),xe=(0,v.useMutation)(B=>S("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){o({type:"warning",message:m(B)})},async onSuccess(B){const{menuLogo:Wt,authLogo:Kt}=B;O({menuLogo:Wt?.url,authLogo:Kt?.url}),Wt?.rawFile&&i("didChangeLogo",{logo:"menu"}),Kt?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),Se=B=>{B.preventDefault(),xe.mutate(ve(s.current.getValues()))};return tt?e.createElement(r.P,null,e.createElement(l.x7,{name:"Application"}),e.createElement(rt.g,null,Me?e.createElement(ht.a,null,a({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:Se},e.createElement(dt.Q,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:pt&&e.createElement(V.$,{type:"submit",startIcon:e.createElement(x.A,null)},a({id:"global.save",defaultMessage:"Save"}))}),e.createElement(at.s,null,e.createElement(X.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement(X.s,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(U.o,{variant:"delta",as:"h3"},a({id:"global.details",defaultMessage:"Details"})),e.createElement(vt.x,{gap:5,as:"dl"},e.createElement(k.E,{col:6,s:12},e.createElement(U.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(X.s,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(U.o,null,"v",w),J&&e.createElement(ct.N,{href:`https://github.com/strapi/strapi/releases/tag/${F}`,isExternal:!0,endIcon:e.createElement(g.A,null)},a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(k.E,{col:6,s:12},e.createElement(U.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(X.s,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(U.o,null,a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:d})),e.createElement(ct.N,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(g.A,null)},a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(k.E,{col:6,s:12},e.createElement(U.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(U.o,{as:"dd"},P)),e.createElement(tt,null))),lt&&$t&&e.createElement(Ee,{canUpdate:pt,ref:s,projectSettingsStored:$t})))))):null};function Ce(){const{settingId:s}=(0,h.g)(),{settings:o}=(0,l.vD)(),{formatMessage:i}=(0,c.A)(),{isLoading:a,menu:p}=(0,f.ki)(),S=(0,T.h)(st,async()=>(await t.e(280).then(t.bind(t,40280))).ROUTES_EE,{combine(m,d){return[...m,...d]},defaultValue:[]}),O=e.useMemo(()=>(0,A.A)(S.map(({to:m,Component:d,exact:F})=>(0,R.A)(d,m,F))),[S]),C=Object.values(o).flatMap(m=>{const{links:d}=m;return d.map(F=>(0,R.A)(F.Component,F.to,F.exact||!1))});return a?e.createElement(l.Bl,null):s?e.createElement(r.P,{sideNav:e.createElement(et,{menu:p})},e.createElement(y.m,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement(h.dO,null,e.createElement(h.qh,{path:"/settings/application-infos",component:Le,exact:!0}),O,C)):e.createElement(h.rd,{to:"/settings/application-infos"})}},60655:(Y,M,t)=>{"use strict";t.d(M,{A:()=>l});var e=t(92132);const r=y=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...y,children:(0,e.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),l=r},63996:(Y,M,t)=>{"use strict";t.d(M,{u:()=>D});var e=t(92132),r=t(21272),l=t(60655),y=t(63891),c=t(94061),h=t(30893),f=t(83997),T=t(85329);const R=(0,y.Ay)(c.a)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:u})=>u.colors.neutral800};
  svg > * {
    fill: ${({theme:u})=>u.colors.neutral600};
  }

  &.active {
    ${({theme:u})=>`
      background-color: ${u.colors.primary100};
      border-right: 2px solid ${u.colors.primary600};
      svg > * {
        fill: ${u.colors.primary700};
      }
      ${h.o} {
        color: ${u.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,A=(0,y.Ay)(l.A)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:u,$active:L})=>L?u.colors.primary600:u.colors.neutral600};
  }
`,j=y.Ay.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,D=r.forwardRef(({children:u,icon:L=null,withBullet:E=!1,as:N=T.s,isSubSectionChild:n=!1,...$},K)=>(0,e.jsxs)(R,{as:N,icon:L,background:"neutral100",paddingLeft:n?9:7,paddingBottom:2,paddingTop:2,ref:K,...$,children:[(0,e.jsxs)(f.s,{children:[L?(0,e.jsx)(j,{children:L}):(0,e.jsx)(A,{}),(0,e.jsx)(c.a,{paddingLeft:2,children:(0,e.jsx)(h.o,{as:"span",children:u})})]}),E&&(0,e.jsx)(c.a,{as:f.s,paddingRight:4,children:(0,e.jsx)(A,{$active:!0})})]}))},64871:(Y,M,t)=>{"use strict";t.d(M,{N:()=>j});var e=t(92132),r=t(21272),l=t(14595),y=t(71389),c=t(63891),h=t(78732),f=t(30893),T=t(94061);const R=c.Ay.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:D})=>D?"none":void 0};
  color: ${({disabled:D,theme:u})=>D?u.colors.neutral600:u.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${f.o} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:D})=>D.colors.primary500};
  }

  &:active {
    color: ${({theme:D})=>D.colors.primary700};
  }

  ${h.AP};
`,A=(0,c.Ay)(T.a)`
  display: flex;
`,j=r.forwardRef(({children:D,href:u,to:L,disabled:E=!1,startIcon:N,endIcon:n,...$},K)=>{const et=u?"_blank":void 0,st=u?"noreferrer noopener":void 0;return(0,e.jsxs)(R,{as:L&&!E?y.k2:"a",target:et,rel:st,to:E?void 0:L,href:E?"#":u,disabled:E,ref:K,...$,children:[N&&(0,e.jsx)(A,{as:"span","aria-hidden":!0,paddingRight:2,children:N}),(0,e.jsx)(f.o,{children:D}),n&&!u&&(0,e.jsx)(A,{as:"span","aria-hidden":!0,paddingLeft:2,children:n}),u&&(0,e.jsx)(A,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(l.A,{})})]})})},67161:(Y,M,t)=>{"use strict";t.d(M,{T6:()=>K,ki:()=>ct});var e=t(30420),r=t(21272),l=t(51337),y=t(35223),c=t.n(y),h=t(80005);const T=(x,g)=>({...x,fieldsToPick:g});var R=t(88761),A=t(79275),j=t.n(A),D=t(48940),u=t.n(D),L=t(81185),E=t.n(L);const N={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},n=(x,g)=>(0,R.Ay)(x,v=>{switch(g.type){case"GET_DATA_SUCCEEDED":{v.isLoading=!1,v.showHeaderLoader=!1,v.initialData=j()(g.data,x.fieldsToPick),v.modifiedData=j()(g.data,x.fieldsToPick);break}case"ON_CANCEL":{v.modifiedData=x.initialData,v.formErrors={};break}case"ON_CHANGE":{g.inputType==="password"&&!g.value?E()(v.modifiedData,g.keys.split(".")):g.keys.includes("username")&&!g.value?u()(v.modifiedData,g.keys.split("."),null):u()(v.modifiedData,g.keys.split("."),g.value);break}case"ON_SUBMIT":{v.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{v.initialData=j()(g.data,x.fieldsToPick),v.modifiedData=j()(g.data,x.fieldsToPick),v.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{v.formErrors=g.errors,v.showHeaderButtonLoader=!1;break}default:return v}}),K=(x,g,v,q)=>{const[{formErrors:G,initialData:ut,isLoading:Z,modifiedData:b,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q]=(0,r.useReducer)(n,N,()=>T(N,q)),z=(0,l.hN)(),{lockApp:ot,unlockApp:Ct}=(0,l.MA)(),{get:yt,put:ft}=(0,l.ry)();return(0,r.useEffect)(()=>{x&&(async()=>{try{const{data:{data:W}}=await yt(x);Q({type:"GET_DATA_SUCCEEDED",data:W,fieldsToPick:q})}catch(W){console.error(W.response),z({type:"warning",message:{id:"notification.error"}})}})()},[x]),[{formErrors:G,initialData:ut,isLoading:Z,modifiedData:b,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q,{handleCancel:()=>{Q({type:"ON_CANCEL"})},handleChange:({target:{name:_,value:W,type:I}})=>{Q({type:"ON_CHANGE",inputType:I,keys:_,value:W})},handleSubmit:async _=>{_.preventDefault();const W=await(0,h.RB)(b,g);if(Q({type:"SET_ERRORS",errors:W||{}}),!W)try{ot(),Q({type:"ON_SUBMIT"});const I=c()(b,["confirmPassword","registrationToken"]);I.roles&&(I.roles=I.roles.map(gt=>gt.id)),I.ssoLockedRoles&&(I.ssoLockedRoles=[...new Set(I.ssoLockedRoles)]);const{data:{data:H}}=await ft(x,I);v(H),Q({type:"ON_SUBMIT_SUCCEEDED",data:H}),z({type:"success",message:{id:"notification.success.saved"}})}catch(I){const H=I?.response?.payload??{data:{}};H?.data&&typeof H.data=="string"?z({type:"warning",message:H.data}):z({type:"warning",message:H.message});const gt=(0,h.N_)(H);Q({type:"SET_ERRORS",errors:gt})}finally{Ct()}},setField:(_,W)=>{Q({type:"ON_CHANGE",keys:_,value:W})}}]};var et=t(69267),st=t(71526),rt=t(88022);const ht={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"}],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"}]},V=x=>x.map(g=>{const v=g.links.map(q=>({...q,isDisplayed:!1}));return{...g,links:v}});var at=t(45635),X=t.n(at);const vt=x=>X()(x,g=>g.id),ct=()=>{const[{isLoading:x,menu:g},v]=(0,r.useState)({isLoading:!0,menu:[]}),{allPermissions:q}=(0,l.r5)(),{shouldUpdateStrapi:G}=(0,l.Xe)(),{settings:ut}=(0,l.vD)(),Z=(0,et.d4)(st.G),{global:b,admin:nt}=(0,rt.h)(ht,async()=>(await t.e(3221).then(t.bind(t,83221))).LINKS_EE,{combine(z,ot){return{admin:[...ot.admin,...z.admin],global:[...z.global,...ot.global]}},defaultValue:{admin:[],global:[]}}),mt=(0,r.useCallback)(z=>{if(!z.id)throw new Error("The settings menu item must have an id attribute.");return{...z,permissions:Z.settings?.[z.id]?.main}},[Z.settings]);(0,r.useEffect)(()=>{const z=async()=>{const Mt=await(Lt=>Promise.all(Lt.reduce((it,Et,_)=>{const W=I=>I.map(async(H,gt)=>({hasPermission:await(0,l.v$)(q,H.permissions),sectionIndex:_,linkIndex:gt}));return[...it,...W(Et.links)]},[])))(yt);v(Lt=>({...Lt,isLoading:!1,menu:yt.map((it,Et)=>({...it,links:it.links.map((_,W)=>{const I=Mt.find(H=>H.sectionIndex===Et&&H.linkIndex===W);return{..._,isDisplayed:Boolean(I.hasPermission)}})}))}))},{global:ot,...Ct}=ut,yt=V([{...ut.global,links:vt([...ut.global.links,...b.map(mt)]).map(ft=>({...ft,hasNotification:ft.id==="000-application-infos"&&G}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:nt.map(mt)},...Object.values(Ct)]);z()},[nt,b,q,ut,G,mt]);const Q=z=>({...z,links:z.links.filter(ot=>ot.isDisplayed)});return{isLoading:x,menu:g.map(Q)}}},81185:(Y,M,t)=>{var e=t(19303);function r(l,y){return l==null?!0:e(l,y)}Y.exports=r},87419:(Y,M,t)=>{"use strict";t.d(M,{L:()=>L});var e=t(92132),r=t(21272),l=t(63891),y=t(9005),c=t(83997),h=t(94061),f=t(30893);const T=(0,l.Ay)(c.s)`
  border: none;
  padding: 0;
  background: transparent;
`,R=l.Ay.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:E})=>E?"0deg":"180deg"});
`,A=({collapsable:E=!1,label:N,onClick:n=()=>{},ariaExpanded:$,ariaControls:K})=>E?(0,e.jsxs)(T,{as:"button",onClick:n,"aria-expanded":$,"aria-controls":K,textAlign:"left",children:[(0,e.jsx)(h.a,{paddingRight:1,children:(0,e.jsx)(f.o,{variant:"sigma",textColor:"neutral600",children:N})}),E&&(0,e.jsx)(R,{rotated:$,children:(0,e.jsx)(y.A,{"aria-hidden":!0})})]}):(0,e.jsx)(T,{children:(0,e.jsx)(h.a,{paddingRight:1,children:(0,e.jsx)(f.o,{variant:"sigma",textColor:"neutral600",children:N})})});var j=t(84175),D=t(10573);const u=(0,l.Ay)(h.a)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:E})=>E.colors.neutral500};
    }
  }
`,L=({collapsable:E=!1,label:N,badgeLabel:n,children:$,id:K})=>{const[et,st]=(0,r.useState)(!0),rt=(0,j.B)(K),ht=()=>{st(dt=>!dt)};return(0,e.jsxs)(c.s,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(u,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,e.jsxs)(h.a,{position:"relative",paddingRight:n?6:0,children:[(0,e.jsx)(A,{onClick:ht,ariaExpanded:et,ariaControls:rt,collapsable:E,label:N}),n&&(0,e.jsx)(D.E,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:n})]})}),(!E||et)&&(0,e.jsx)("ol",{id:rt,children:r.Children.map($,(dt,V)=>(0,e.jsx)("li",{children:dt},V))})]})}}}]);
