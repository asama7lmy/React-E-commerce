(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[9274],{11714:(T,p,e)=>{"use strict";e.d(p,{Ae:()=>d,Al:()=>v,Cx:()=>l,Dp:()=>C,T1:()=>r,TE:()=>D,U:()=>i,YT:()=>m,Yy:()=>n,aM:()=>u,fR:()=>a,h$:()=>s,hH:()=>A,hK:()=>O,iz:()=>g,oA:()=>y,p6:()=>o,pq:()=>c,sT:()=>E});var t=e(57438);const o="settings_review-workflows",a="Settings/Review_Workflows/RESET_WORKFLOW",u="Settings/Review_Workflows/SET_CONTENT_TYPES",g="Settings/Review_Workflows/SET_IS_LOADING",n="Settings/Review_Workflows/SET_ROLES",E="Settings/Review_Workflows/SET_WORKFLOW",r="Settings/Review_Workflows/SET_WORKFLOWS",i="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",l="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",m="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",c="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",d="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",s="Settings/Review_Workflows/WORKFLOW_UPDATE",y={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},A=t._.colors.primary600,D={STAGE:"stage"},O="numberOfWorkflows",C="stagesPerWorkflow"},16819:(T,p,e)=>{var t=e(81204),o=e(51646),a="[object Number]";function u(g){return typeof g=="number"||o(g)&&t(g)==a}T.exports=u},18960:(T,p,e)=>{"use strict";e.d(p,{F:()=>u,u:()=>a});var t=e(88761),o=e(11714);const a={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function u(n=a,E){return(0,t.jM)(n,r=>{const{payload:i}=E;switch(E.type){case o.aM:{r.serverState.contentTypes=i;break}case o.iz:{r.clientState.isLoading=i;break}case o.Yy:{r.serverState.roles=i;break}case o.sT:{const l=i;l&&(r.serverState.workflow=l,r.clientState.currentWorkflow.data={...l,stages:l.stages.map(m=>({...m,color:m?.color??o.hH}))});break}case o.T1:{r.serverState.workflows=i;break}case o.fR:{r.clientState=a.clientState,r.serverState=a.serverState;break}case o.U:{const{stageId:l}=i,{currentWorkflow:m}=n.clientState;r.clientState.currentWorkflow.data.stages=m.data.stages.filter(v=>(v?.id??v.__temp_key__)!==l);break}case o.Cx:{const{currentWorkflow:l}=n.clientState;l.data||(r.clientState.currentWorkflow.data={stages:[]});const m=g(r.clientState.currentWorkflow.data.stages);r.clientState.currentWorkflow.data.stages.push({...i,color:i?.color??o.hH,__temp_key__:m});break}case o.YT:{const{currentWorkflow:l}=n.clientState,{id:m}=i,v=l.data.stages.findIndex(d=>(d?.id??d?.__temp_key__)===m),c=l.data.stages[v];r.clientState.currentWorkflow.data.stages.splice(v+1,0,{...c,id:void 0,__temp_key__:g(r.clientState.currentWorkflow.data.stages)});break}case o.Al:{const{currentWorkflow:l}=n.clientState,{stageId:m,...v}=i;r.clientState.currentWorkflow.data.stages=l.data.stages.map(c=>(c.id??c.__temp_key__)===m?{...c,...v}:c);break}case o.pq:{const{currentWorkflow:l}=n.clientState;r.clientState.currentWorkflow.data.stages=l.data.stages.map(m=>({...m,...i}));break}case o.Ae:{const{currentWorkflow:{data:{stages:l}}}=n.clientState,{newIndex:m,oldIndex:v}=i;if(m>=0&&m<l.length){const c=l[v];let d=[...l];d.splice(v,1),d.splice(m,0,c),r.clientState.currentWorkflow.data.stages=d}break}case o.h$:{r.clientState.currentWorkflow.data={...r.clientState.currentWorkflow.data,...i};break}default:break}})}const g=(n=[])=>{const E=n.map(r=>r.id??r.__temp_key__);return Math.max(...E,-1)+1}},20022:(T,p,e)=>{"use strict";e.d(p,{b:()=>u});var t=e(21272),o=e(51337),a=e(74930);function u({enabled:g}={enabled:!0}){const{get:n}=(0,o.ry)(),{data:E,isError:r,isLoading:i}=(0,a.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:v}}=await n("/admin/license-limit-information");return v},{enabled:g}),l=t.useMemo(()=>E??{},[E]),m=t.useCallback(v=>(l?.features??[]).find(d=>d.name===v)?.options??{},[l?.features]);return{license:l,getFeature:m,isError:r,isLoading:i}}},30127:(T,p,e)=>{"use strict";e.d(p,{N:()=>a});var t=e(21272),o=e(69267);function a(u,g){const n=(0,o.Pj)();(0,t.useEffect)(()=>{n.injectReducer(u,g)},[n,u,g])}},30405:(T,p,e)=>{"use strict";e.d(p,{M:()=>u,w:()=>a});var t=e(57438),o=e(11714);function a(g){if(!g)return null;const E=Object.entries(t._.colors).filter(([,r])=>r.toUpperCase()===g.toUpperCase()).reduce((r,[i])=>(o.oA?.[i]&&(r=i),r),null);return E?{themeColorName:E,name:o.oA[E]}:null}function u(){return Object.entries(o.oA).map(([g,n])=>({hex:t._.colors[g].toUpperCase(),name:n}))}},39116:(T,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(92132);const o=u=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...u,children:[(0,t.jsx)("path",{fill:"#212134",d:"M16.563 5.587a2.503 2.503 0 1 0 0-5.007 2.503 2.503 0 0 0 0 5.007Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M18.487 3.083c-.012.788-.487 1.513-1.229 1.797a1.954 1.954 0 0 1-2.184-.574A1.943 1.943 0 0 1 14.9 2.11c.4-.684 1.2-1.066 1.981-.927a1.954 1.954 0 0 1 1.606 1.9c.011.748 1.17.748 1.158 0A3.138 3.138 0 0 0 17.565.17c-1.176-.423-2.567-.03-3.36.933-.83 1.002-.968 2.45-.284 3.575.678 1.124 1.993 1.674 3.273 1.431 1.432-.272 2.428-1.593 2.451-3.019.012-.753-1.147-.753-1.158-.006ZM16.563 14.372a2.503 2.503 0 1 0 0-5.007 2.503 2.503 0 0 0 0 5.007Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M18.487 11.867c-.012.789-.487 1.513-1.229 1.797a1.954 1.954 0 0 1-2.184-.574 1.943 1.943 0 0 1-.174-2.196c.4-.684 1.2-1.066 1.981-.927.928.156 1.588.968 1.606 1.9.011.748 1.17.748 1.158 0a3.138 3.138 0 0 0-2.08-2.914c-1.176-.423-2.567-.029-3.36.933-.83 1.002-.968 2.45-.284 3.575.678 1.124 1.993 1.675 3.273 1.431 1.432-.272 2.428-1.593 2.451-3.019.012-.753-1.147-.753-1.158-.005ZM16.563 23.392a2.503 2.503 0 1 0 0-5.006 2.503 2.503 0 0 0 0 5.006Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M18.487 20.89c-.012.787-.487 1.512-1.229 1.796a1.954 1.954 0 0 1-2.184-.574 1.943 1.943 0 0 1-.174-2.196c.4-.684 1.2-1.066 1.981-.927.928.156 1.588.967 1.606 1.9.011.748 1.17.748 1.158 0a3.138 3.138 0 0 0-2.08-2.914c-1.176-.423-2.567-.03-3.36.933-.83 1.002-.968 2.45-.284 3.575.678 1.124 1.993 1.674 3.273 1.431 1.432-.272 2.428-1.593 2.451-3.019.012-.753-1.147-.753-1.158-.006ZM7.378 5.622a2.503 2.503 0 1 0 0-5.007 2.503 2.503 0 0 0 0 5.007Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M9.302 3.119c-.011.788-.486 1.512-1.228 1.796a1.954 1.954 0 0 1-2.185-.574 1.943 1.943 0 0 1-.173-2.196c.4-.684 1.199-1.066 1.981-.927a1.943 1.943 0 0 1 1.605 1.9c.012.748 1.17.748 1.16 0A3.138 3.138 0 0 0 8.38.205c-1.176-.423-2.567-.029-3.36.933-.83 1.002-.968 2.45-.285 3.575.678 1.124 1.994 1.675 3.274 1.431 1.431-.272 2.428-1.593 2.451-3.019.012-.753-1.147-.753-1.159-.005ZM7.378 14.406a2.503 2.503 0 1 0 0-5.006 2.503 2.503 0 0 0 0 5.006Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M9.302 11.902c-.011.788-.486 1.513-1.228 1.797a1.954 1.954 0 0 1-2.185-.574 1.943 1.943 0 0 1-.173-2.196c.4-.684 1.199-1.066 1.981-.927a1.943 1.943 0 0 1 1.605 1.9c.012.748 1.17.748 1.16 0A3.138 3.138 0 0 0 8.38 8.988c-1.176-.423-2.567-.03-3.36.933-.83 1.002-.968 2.45-.285 3.575.678 1.124 1.994 1.674 3.274 1.431 1.431-.272 2.428-1.593 2.451-3.019.012-.753-1.147-.753-1.159-.006ZM7.378 23.427a2.503 2.503 0 1 0 0-5.007 2.503 2.503 0 0 0 0 5.007Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M9.302 20.924c-.011.788-.486 1.513-1.228 1.797a1.954 1.954 0 0 1-2.185-.574 1.943 1.943 0 0 1-.173-2.196c.4-.684 1.199-1.066 1.981-.927.933.156 1.594.967 1.605 1.9.012.748 1.17.748 1.16 0A3.139 3.139 0 0 0 8.38 18.01c-1.176-.423-2.567-.03-3.36.933-.83 1.002-.968 2.45-.285 3.569.678 1.124 1.994 1.675 3.274 1.431 1.431-.272 2.428-1.593 2.451-3.019.012-.747-1.147-.747-1.159 0Z"})]}),a=o},41090:(T,p,e)=>{"use strict";e.d(p,{_:()=>u});var t=e(48940),o=e.n(t),a=e(12083);async function u({values:g,formatMessage:n}){const E=a.Ik({contentTypes:a.YO().of(a.Yj()),name:a.Yj().max(255,n({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:a.YO().of(a.Ik().shape({name:a.Yj().required(n({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,n({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",n({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(r){const{options:{context:i}}=this;return i.stages.filter(l=>l.name===r).length===1}),color:a.Yj().required(n({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:a.YO(a.Ik({role:a.ai().strict().typeError(n({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required,action:a.Yj().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await E.validate(g,{abortEarly:!1,context:g}),!0}catch(r){let i={};return r instanceof a.yI&&r.inner.forEach(l=>{o()(i,l.path,l.message)}),i}}},42570:(T,p,e)=>{"use strict";e.d(p,{r:()=>D});var t=e(21272),o=e(56654),a=e(30893),u=e(90151),g=e(68074),n=e(7537),E=e(51337),r=e(2506),i=e(33544),l=e.n(i),m=e(54894),v=e(69267),c=e(63891),d=e(45683),s=e(87953);const y=(0,c.Ay)(o.fe)`
  padding-left: ${({theme:O})=>O.spaces[7]};
`,A=(0,c.Ay)(a.o)`
  font-style: italic;
`;function D({canUpdate:O}){const{formatMessage:C,locale:I}=(0,m.A)(),R=(0,v.wA)(),{collectionTypes:S,singleTypes:w}=(0,v.d4)(s.tn),x=(0,v.d4)(s.NJ),P=(0,v.d4)(s.Ze),[B,z,H]=(0,r.Mt)("name"),[K,N,Z]=(0,r.Mt)("contentTypes"),X=(0,E.QM)(I,{sensitivity:"base"});return t.createElement(u.x,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow"},t.createElement(g.E,{col:6},t.createElement(n.k,{...B,id:B.name,disabled:!O,label:C({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:z.error??!1,onChange:M=>{R((0,d.xY)({name:M.target.value})),H.setValue(M.target.value)},required:!0})),t.createElement(g.E,{col:6},t.createElement(o.KF,{...K,customizeContent:M=>C({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:M.length}),disabled:!O,error:N.error??!1,id:K.name,label:C({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:M=>{R((0,d.xY)({contentTypes:M})),Z.setValue(M)},placeholder:C({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"})},[...S.length>0?[{label:C({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...S].sort((M,k)=>X.compare(M.info.displayName,k.info.displayName)).map(M=>({label:M.info.displayName,value:M.uid}))}]:[],...w.length>0?[{label:C({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...w].map(M=>({label:M.info.displayName,value:M.uid}))}]:[]].map(M=>"children"in M?t.createElement(o.np,{key:M.label,label:M.label,values:M.children.map(k=>k.value.toString())},M.children.map(k=>{const{name:V}=P.find(b=>(x&&b.id!==x.id||!x)&&b.contentTypes.includes(k.value))??{};return t.createElement(y,{key:k.value,value:k.value},C({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:k.label,name:V,em:(...b)=>t.createElement(a.o,{as:"em",fontWeight:"bold"},b),i:(...b)=>t.createElement(A,null,b)}))})):t.createElement(o.fe,{key:M.value,value:M.value},M.label)))))}D.defaultProps={canUpdate:!0},D.propTypes={canUpdate:l().bool}},43206:(T,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(92132);const o=u=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...u,children:[(0,t.jsx)("circle",{cx:12,cy:12,r:12,fill:"#212134"}),(0,t.jsx)("path",{fill:"#F6F6F9",d:"M17 12.569c0 .124-.1.224-.225.224h-3.981v3.982c0 .124-.101.225-.226.225h-1.136a.225.225 0 0 1-.226-.225v-3.981H7.226A.225.225 0 0 1 7 12.567v-1.136c0-.125.1-.226.225-.226h3.982V7.226c0-.124.1-.225.224-.225h1.138c.124 0 .224.1.224.225v3.982h3.982c.124 0 .225.1.225.224v1.138Z"})]}),a=o},44604:(T,p,e)=>{"use strict";e.d(p,{u:()=>u});var t=e(92132),o=e(97366),a=e(94061);const u=({children:g,...n})=>{const{expanded:E,id:r}=(0,o.O)();if(!E)return null;const i=`accordion-content-${r}`,l=`accordion-label-${r}`,m=`accordion-desc-${r}`;return(0,t.jsx)(a.a,{role:"region",id:i,"aria-labelledby":l,"aria-describedby":m,...n,children:g})}},45410:(T,p,e)=>{"use strict";e.d(p,{e:()=>se});var t=e(21272),o=e(94061),a=e(83997),u=e(51337),g=e(33544),n=e.n(g),E=e(54894),r=e(69267),i=e(63891),l=e(45683),m=e(30893),v=e(43206);const c=(0,i.Ay)(v.A)`
  > circle {
    fill: ${({theme:f})=>f.colors.neutral150};
  }
  > path {
    fill: ${({theme:f})=>f.colors.neutral600};
  }
`,d=(0,i.Ay)(o.a)`
  border-radius: 26px;

  svg {
    height: ${({theme:f})=>f.spaces[6]};
    width: ${({theme:f})=>f.spaces[6]};

    > path {
      fill: ${({theme:f})=>f.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:f})=>f.colors.primary600} !important;
    ${m.o} {
      color: ${({theme:f})=>f.colors.primary600} !important;
    }

    ${c} {
      > circle {
        fill: ${({theme:f})=>f.colors.primary600};
      }
      > path {
        fill: ${({theme:f})=>f.colors.neutral100};
      }
    }
  }

  &:active {
    ${m.o} {
      color: ${({theme:f})=>f.colors.primary600};
    }

    ${c} {
      > circle {
        fill: ${({theme:f})=>f.colors.primary600};
      }
      > path {
        fill: ${({theme:f})=>f.colors.neutral100};
      }
    }
  }
`;function s({children:f,...$}){return t.createElement(d,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...$},t.createElement(a.s,{gap:2},t.createElement(c,{"aria-hidden":!0}),t.createElement(m.o,{variant:"pi",fontWeight:"bold",textColor:"neutral500"},f)))}s.propTypes={children:n().node.isRequired};var y=e(56654),A=e(88353),D=e(98765),O=e(57237),C=e(60888),I=e(44604),R=e(90151),S=e(68074),w=e(7537),x=e(48323),P=e(5336),B=e(56936),z=e(85641),H=e(39116),K=e(90625),N=e(2506),Z=e(49005),X=e(99142),M=e(98342),k=e(11714),V=e(87953),b=e(30405);const _=(0,i.Ay)(y.fe)`
  padding-left: ${({theme:f})=>f.spaces[7]};
`,q=(0,i.Ay)(a.s)`
  > * {
    flex-grow: 1;
  }
`,Ee=(0,i.Ay)(P.Dr)`
  color: ${({theme:f})=>f.colors.danger600};
`,ve=(0,i.Ay)(B.l9)`
  :hover,
  :focus {
    background-color: ${({theme:f})=>f.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,he=(0,i.Ay)(A.K)`
  align-items: center;
  border-radius: ${({theme:f})=>f.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:f})=>f.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:f})=>f.spaces[3]}};
  }
`,ye=(0,b.M)();function we(){return t.createElement(o.a,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"})}function ce({id:f,index:$,canDelete:F,canReorder:ne,canUpdate:j,isOpen:re=!1,stagesCount:Q}){const J=h=>`${h+1} of ${Q}`,ee=h=>{te(W({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:U.value,position:J(h)}))},Te=h=>{te(W({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:U.value,position:J(h)}))},Ae=()=>{te(W({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:U.value}))},Se=(h,L)=>{te(W({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:U.value,position:J(h)})),G((0,l.Ll)(L,h))},Oe=()=>{ie(!0)},[de,te]=t.useState(null),{formatMessage:W}=(0,E.A)(),{trackUsage:Ce}=(0,u.z1)(),G=(0,r.wA)(),Re=(0,u.hN)(),[le,De]=t.useState(re),[xe,ie]=t.useState(!1),[U,ue,We]=(0,N.Mt)(`stages.${$}.name`),[ae,me,Ie]=(0,N.Mt)(`stages.${$}.color`),[Y,ge,Pe]=(0,N.Mt)(`stages.${$}.permissions`),Le=(0,r.d4)(V.y3),[{handlerId:be,isDragging:ke,handleKeyDown:Be},$e,Ke,je,pe]=(0,X.gY)(ne,{index:$,item:{name:U.value},onGrabItem:ee,onDropItem:Te,onMoveItem:Se,onCancel:Ae,type:k.TE.STAGE}),Ne=(0,M.tE)($e,Ke),Ue=ye.map(({hex:h,name:L})=>({value:h,label:W({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:L}),color:h})),{themeColorName:Fe}=(0,b.w)(ae.value)??{},fe=Le.filter(h=>h.code!=="strapi-super-admin");return t.useEffect(()=>{pe((0,Z.n5)(),{captureDraggingState:!1})},[pe,$]),t.createElement(o.a,{ref:Ne},de&&t.createElement(D.s,{"aria-live":"assertive"},de),ke?t.createElement(we,null):t.createElement(O.n,{size:"S",variant:"primary",onToggle:()=>{De(!le),le||Ce("willEditStage")},expanded:le,shadow:"tableShadow",error:ue.error??me?.error??ge?.error??!1,hasErrorMessage:!1},t.createElement(C.P,{title:U.value,togglePosition:"left",action:(F||j)&&t.createElement(a.s,null,t.createElement(B.bL,null,t.createElement(ve,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2},t.createElement(z.A,{"aria-hidden":!0,focusable:!1}),t.createElement(D.s,{as:"span"},W({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"}))),t.createElement(B.UC,{popoverPlacement:"bottom-end",zIndex:2},t.createElement(B.x8,null,j&&t.createElement(P.Dr,{onClick:()=>G((0,l.g1)(f))},W({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})),F&&t.createElement(Ee,{onClick:()=>G((0,l.Ku)(f))},W({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"}))))),j&&t.createElement(he,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":be,ref:je,label:W({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:h=>h.stopPropagation(),onKeyDown:Be},t.createElement(H.A,null)))}),t.createElement(I.u,{padding:6,background:"neutral0",hasRadius:!0},t.createElement(R.x,{gap:4},t.createElement(S.E,{col:6},t.createElement(w.k,{...U,id:U.name,disabled:!j,label:W({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:ue.error??!1,onChange:h=>{We.setValue(h.target.value),G((0,l.Io)(f,{name:h.target.value}))},required:!0})),t.createElement(S.E,{col:6},t.createElement(x.Z,{disabled:!j,error:me?.error??!1,id:ae.name,required:!0,label:W({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:h=>{Ie.setValue(h),G((0,l.Io)(f,{color:h}))},value:ae.value.toUpperCase(),startIcon:t.createElement(a.s,{as:"span",height:2,background:ae.value,borderColor:Fe==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},Ue.map(({value:h,label:L,color:oe})=>{const{themeColorName:Ge}=(0,b.w)(oe);return t.createElement(x.eY,{value:h,key:h,startIcon:t.createElement(a.s,{as:"span",height:2,background:oe,borderColor:Ge==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},L)}))),t.createElement(S.E,{col:6},fe.length===0?t.createElement(u.WT,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:Y.name}):t.createElement(a.s,{alignItems:"flex-end",gap:3},t.createElement(q,{grow:1},t.createElement(y.KF,{...Y,disabled:!j,error:ge.error??!1,id:Y.name,label:W({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:h=>{const L=h.map(oe=>({role:parseInt(oe,10),action:"admin::review-workflows.stage.transition"}));Pe.setValue(L),G((0,l.Io)(f,{permissions:L}))},placeholder:W({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(Y.value??[]).map(h=>`${h.role}`),withTags:!0},[{label:W({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),children:fe.map(h=>({value:`${h.id}`,label:h.name}))}].map(h=>"children"in h?t.createElement(y.np,{key:h.label,label:h.label,values:h.children.map(L=>L.value)},h.children.map(L=>t.createElement(_,{key:L.value,value:L.value},L.label))):t.createElement(y.fe,{key:h.value,value:h.value},h.label)))),t.createElement(A.K,{disabled:!j,icon:t.createElement(K.A,null),label:W({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>Oe(Y.value)})))))),t.createElement(u.TM.Root,{iconRightButton:null,isOpen:xe,onToggleDialog:()=>ie(!1),onConfirm:()=>{G((0,l.r0)({permissions:Y.value})),ie(!1),Re({type:"success",message:W({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"primary"},t.createElement(u.TM.Body,null,t.createElement(m.o,{textAlign:"center",variant:"omega"},W({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})))))}ce.propTypes=n().shape({id:n().number.isRequired,color:n().string.isRequired,canDelete:n().bool.isRequired,canReorder:n().bool.isRequired,canUpdate:n().bool.isRequired,stagesCount:n().number.isRequired}).isRequired;const Me=(0,i.Ay)(o.a)`
  transform: translateX(-50%);
`;function se({canDelete:f,canUpdate:$,stages:F}){const{formatMessage:ne}=(0,E.A)(),j=(0,r.wA)(),{trackUsage:re}=(0,u.z1)();return t.createElement(a.s,{direction:"column",gap:6,width:"100%"},t.createElement(o.a,{position:"relative",spacing:4,width:"100%"},t.createElement(Me,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),t.createElement(a.s,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol"},F.map((Q,J)=>{const ee=Q?.id??Q.__temp_key__;return t.createElement(o.a,{key:`stage-${ee}`,as:"li"},t.createElement(ce,{id:ee,index:J,isOpen:!Q.id,canDelete:F.length>1&&f,canReorder:F.length>1,canUpdate:$,stagesCount:F.length}))}))),$&&t.createElement(s,{type:"button",onClick:()=>{j((0,l.mF)({name:""})),re("willCreateStage")}},ne({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})))}se.defaultProps={canDelete:!0,canUpdate:!0,stages:[]},se.propTypes={canDelete:n().bool,canUpdate:n().bool,stages:n().arrayOf(n().shape({id:n().number,__temp_key__:n().number,name:n().string.isRequired}))}},45683:(T,p,e)=>{"use strict";e.d(p,{F6:()=>d,Io:()=>E,JU:()=>m,Ku:()=>g,Ll:()=>i,R5:()=>u,S0:()=>c,g1:()=>o,mF:()=>n,r0:()=>r,xO:()=>v,xY:()=>l,yX:()=>a});var t=e(11714);function o(s){return{type:t.YT,payload:{id:s}}}function a({workflow:s}){return{type:t.sT,payload:s}}function u({workflows:s}){return{type:t.T1,payload:s}}function g(s){return{type:t.U,payload:{stageId:s}}}function n(s={}){return{type:t.Cx,payload:s}}function E(s,y){return{type:t.Al,payload:{stageId:s,...y}}}function r(s){return{type:t.pq,payload:s}}function i(s,y){return{type:t.Ae,payload:{newIndex:y,oldIndex:s}}}function l(s){return{type:t.h$,payload:s}}function m(){return{type:t.fR}}function v(s){return{type:t.aM,payload:s}}function c(s){return{type:t.Yy,payload:s}}function d(s){return{type:t.iz,payload:s}}},46270:(T,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(92132);const o=u=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...u,children:(0,t.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),a=o},54257:(T,p,e)=>{var t=e(16819);function o(a){return t(a)&&a!=+a}T.exports=o},54729:(T,p,e)=>{"use strict";e.d(p,{g:()=>g});var t=e(21272),o=e(51337),a=e(54894),u=e(74930);const g=(n={},E={})=>{const{id:r="",...i}=n,{get:l}=(0,o.ry)(),{locale:m}=(0,a.A)(),v=(0,o.QM)(m,{sensitivity:"base"}),{data:c,error:d,isError:s,isLoading:y,refetch:A}=(0,u.useQuery)(["roles",r,i],async()=>{const{data:O}=await l(`/admin/roles/${r??""}`,{params:i});return O},E);return{roles:t.useMemo(()=>{let O=[];return c&&(Array.isArray(c.data)?O=c.data:O=[c.data]),[...O].sort((C,I)=>v.compare(C.name,I.name))},[c,v]),error:d,isError:s,isLoading:y,refetch:A}}},57237:(T,p,e)=>{"use strict";e.d(p,{I:()=>l,n:()=>v});var t=e(92132),o=e(21272),a=e(63891),u=e(97366),g=e(84175),n=e(30893),E=e(83997),r=e(94061);const i=({theme:c,expanded:d,variant:s,disabled:y,error:A})=>A?`1px solid ${c.colors.danger600} !important`:y?`1px solid ${c.colors.neutral150}`:d?`1px solid ${c.colors.primary600}`:s==="primary"?`1px solid ${c.colors.neutral0}`:`1px solid ${c.colors.neutral100}`,l=(0,a.Ay)(n.o)``,m=(0,a.Ay)(r.a)`
  border: ${i};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:c})=>c.colors.primary600};

    ${l} {
      color: ${({theme:c,expanded:d})=>d?void 0:c.colors.primary700};
    }

    ${n.o} {
      color: ${({theme:c,expanded:d})=>d?void 0:c.colors.primary600};
    }

    & > ${E.s} {
      background: ${({theme:c})=>c.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:c})=>c.colors.primary200};
    }
  }
`,v=({children:c,disabled:d=!1,error:s,expanded:y=!1,hasErrorMessage:A=!0,id:D,onToggle:O,toggle:C,size:I="M",variant:R="primary",shadow:S})=>{const w=(0,g.B)(D),x=o.useMemo(()=>({expanded:y,onToggle:O,toggle:C,id:w,size:I,variant:R,disabled:d}),[d,y,w,O,I,C,R]);return(0,t.jsxs)(u.C.Provider,{value:x,children:[(0,t.jsx)(m,{"data-strapi-expanded":y,disabled:d,"aria-disabled":d,expanded:y,hasRadius:!0,variant:R,error:s,shadow:S,children:c}),s&&A&&(0,t.jsx)(r.a,{paddingTop:1,children:(0,t.jsx)(n.o,{variant:"pi",textColor:"danger600",children:s})})]})}},59984:(T,p,e)=>{"use strict";e.d(p,{nB:()=>O,bL:()=>R,hE:()=>D});var t=e(21272),o=e(30893),a=e(83997),u=e(61485),g=e(6239),n=e(94061),E=e(88353),r=e(49654),i=e(68802),l=e(33544),m=e.n(l),v=e(54894),c=e(63891);const d=e.p+"0cd5f8915b265d5b1856.png",s="limits-title",y="https://strapi.io/pricing-cloud",A="https://strapi.io/contact-sales";function D({children:S}){return t.createElement(o.o,{variant:"alpha",id:s},S)}D.propTypes={children:m().node.isRequired};function O({children:S}){return t.createElement(o.o,{variant:"omega"},S)}O.propTypes={children:m().node.isRequired};function C(){const{formatMessage:S}=(0,v.A)();return t.createElement(a.s,{gap:2,paddingTop:4},t.createElement(r.z,{variant:"default",isExternal:!0,href:y},S({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(r.z,{variant:"tertiary",isExternal:!0,href:A},S({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const I=c.Ay.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:S})=>`-${S.spaces[7]}`};
  margin-top: ${({theme:S})=>`-${S.spaces[7]}`};
  width: 360px;
`;function R({children:S,isOpen:w,onClose:x}){const{formatMessage:P}=(0,v.A)();return w?t.createElement(u.k,{labelledBy:s},t.createElement(g.c,null,t.createElement(a.s,{gap:2,paddingLeft:7,position:"relative"},t.createElement(a.s,{alignItems:"start",direction:"column",gap:2,width:"60%"},S,t.createElement(C,null)),t.createElement(a.s,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(I,{src:d,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(n.a,{display:"flex",position:"absolute",right:0,top:0},t.createElement(E.K,{icon:t.createElement(i.A,null),"aria-label":P({id:"global.close",defaultMessage:"Close"}),onClick:x})))))):null}R.defaultProps={isOpen:!1},R.propTypes={children:m().node.isRequired,isOpen:m().bool,onClose:m().func.isRequired}},60888:(T,p,e)=>{"use strict";e.d(p,{P:()=>c});var t=e(92132),o=e(9005),a=e(63891),u=e(57237),g=e(97366);const n=({expanded:d,disabled:s,variant:y})=>{let A="neutral100";return d?A="primary100":s?A="neutral150":y==="primary"&&(A="neutral0"),A};var E=e(18629),r=e(58805),i=e(83997),l=e(30893);const m=(0,a.Ay)(E.Q)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:d,expanded:s})=>s?d.colors.primary600:d.colors.neutral500};
    }
  }
`,v=(0,a.Ay)(i.s)`
  min-height: ${({theme:d,size:s})=>d.sizes.accordions[s]};
  border-radius: ${({theme:d,expanded:s})=>s?`${d.borderRadius} ${d.borderRadius} 0 0`:d.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:d})=>d.colors.primary600};
      }
    }
  }
`,c=({title:d,description:s,as:y="span",togglePosition:A="right",action:D,...O})=>{const{onToggle:C,toggle:I,expanded:R,id:S,size:w,variant:x,disabled:P}=(0,g.O)(),B=`accordion-content-${S}`,z=`accordion-label-${S}`,H=`accordion-desc-${S}`,K=w==="M"?6:4,N=w==="M"?K:K-2,Z=n({expanded:R,disabled:P,variant:x}),M={as:y,fontWeight:w==="S"?"bold":void 0,id:z,textColor:R?"primary600":"neutral700",ellipsis:!0,variant:w==="M"?"delta":void 0},k=R?"primary600":"neutral600",V=R?"primary200":"neutral200",b=w==="M"?`${32/16}rem`:`${24/16}rem`,_=()=>{P||(I&&!C?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),I()):C&&C())},q=(0,t.jsx)(i.s,{justifyContent:"center",borderRadius:"50%",height:b,width:b,transform:R?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:V,cursor:P?"not-allowed":"pointer",onClick:_,shrink:0,children:(0,t.jsx)(r.I,{as:o.A,width:w==="M"?`${11/16}rem`:`${8/16}rem`,color:R?"primary600":"neutral600"})});return(0,t.jsx)(v,{paddingBottom:N,paddingLeft:K,paddingRight:K,paddingTop:N,background:Z,expanded:R,size:w,justifyContent:"space-between",cursor:P?"not-allowed":"",children:(0,t.jsxs)(i.s,{gap:3,flex:1,maxWidth:"100%",children:[A==="left"&&q,(0,t.jsx)(m,{onClick:_,"aria-disabled":P,"aria-expanded":R,"aria-controls":B,"aria-labelledby":z,"data-strapi-accordion-toggle":!0,expanded:R,type:"button",flex:1,minWidth:0,...O,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.I,{...M,children:d}),s&&(0,t.jsx)(l.o,{as:"p",id:H,textColor:k,children:s})]})}),A==="right"&&(0,t.jsxs)(i.s,{gap:3,children:[q,D]}),A==="left"&&D]})})}},78101:(T,p,e)=>{"use strict";e.d(p,{W:()=>u});var t=e(21272),o=e(51337),a=e(74930);function u(g={}){const{get:n}=(0,o.ry)(),{id:E="",...r}=g,i={populate:"stages"},{data:l,isLoading:m,status:v,refetch:c}=(0,a.useQuery)(["review-workflows","workflows",E],async()=>(await n(`/admin/review-workflows/workflows/${E}`,{params:{...i,...r}})).data),d=t.useMemo(()=>E&&l?.data?[l.data]:Array.isArray(l?.data)?l.data:[],[l?.data,E]);return{meta:t.useMemo(()=>l?.meta??{},[l?.meta]),workflows:d,isLoading:m,status:v,refetch:c}}},84624:(T,p,e)=>{var t=e(81204),o=e(51646),a="[object Boolean]";function u(g){return g===!0||g===!1||o(g)&&t(g)==a}T.exports=u},85641:(T,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(92132);const o=u=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...u,children:(0,t.jsx)("path",{fill:"#32324D",d:"M3.5 14.6a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Zm8.5 0a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Zm8.5 0a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Z"})}),a=o},87953:(T,p,e)=>{"use strict";e.d(p,{Di:()=>c,EJ:()=>m,Hc:()=>d,If:()=>v,NJ:()=>i,Ze:()=>l,tn:()=>E,y3:()=>r});var t=e(56336),o=e.n(t),a=e(26924),u=e(11714),g=e(18960);const n=s=>s[u.p6]??g.u,E=(0,a.Mz)(n,({serverState:{contentTypes:s}})=>s),r=(0,a.Mz)(n,({serverState:{roles:s}})=>s),i=(0,a.Mz)(n,({clientState:{currentWorkflow:s}})=>s.data),l=(0,a.Mz)(n,({serverState:{workflows:s}})=>s),m=(0,a.Mz)(n,({serverState:s,clientState:{currentWorkflow:y}})=>!o()(s.workflow,y.data)),v=(0,a.Mz)(n,({serverState:s,clientState:{currentWorkflow:y}})=>!(s.workflow?.stages??[]).every(A=>!!y.data.stages.find(({id:D})=>D===A.id))),c=(0,a.Mz)(n,({clientState:{isLoading:s}})=>s),d=(0,a.Mz)(n,({serverState:s})=>s)},89974:(T,p,e)=>{"use strict";e.d(p,{kc:()=>R,nh:()=>C,Y9:()=>S,bL:()=>I});var t=e(21272),o=e(42455),a=e(38413),u=e(4198),g=e(55356),n=e(51337),E=e(46270),r=e(54894),i=e(35099),l=e(11714),m=e(83997),v=e(30893),c=e(9005),d=e(33544),s=e.n(d),y=e(63891);const A=(0,y.Ay)(m.s)`
  svg path {
    fill: ${({theme:w})=>w.colors.neutral600};
  }
`;function D({name:w}){return t.createElement(m.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,n.a8)(300)},t.createElement(A,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(c.A,{width:`${8/16}rem`})),t.createElement(v.o,{fontWeight:"bold"},w))}D.propTypes={name:s().string.isRequired};function O({type:w,item:x}){switch(w){case l.TE.STAGE:return t.createElement(D,{...x});default:return null}}function C(){return t.createElement(i.M,{renderItem:O})}function I({children:w}){return t.createElement(o.P,null,t.createElement(a.g,{tabIndex:-1},t.createElement(u.s,null,w)))}function R({href:w}){const{formatMessage:x}=(0,r.A)();return t.createElement(n.N_,{startIcon:t.createElement(E.A,null),to:w},x({id:"global.back",defaultMessage:"Back"}))}function S({title:w,subtitle:x,navigationAction:P,primaryAction:B}){return t.createElement(t.Fragment,null,t.createElement(n.x7,{name:w}),t.createElement(g.Q,{navigationAction:P,primaryAction:B,title:w,subtitle:x}))}},97366:(T,p,e)=>{"use strict";e.d(p,{C:()=>o,O:()=>a});var t=e(21272);const o=(0,t.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),a=()=>(0,t.useContext)(o)}}]);
